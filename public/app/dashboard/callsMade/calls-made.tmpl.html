<div class="row custom-grid">
    <ul class="collapsible white-background" data-collapsible="accordion" sly-prevent-evaluation-when-hidden>

        <li>
            <div class="row grid-header-bar no-margin">

                <div class="col s2 no-margin center-align" ng-click="vm.assignSortType('town_title')">
                    <span class="sortOrder" ng-show="vm.sortType === 'town_title'"
                          ng-class="{reverse: vm.reverse}"></span>
                    <span>Town</span>
                </div>
                <div class="col s2 no-margin center-align" ng-click="vm.assignSortType('route_title')">
                    <span class="sortOrder" ng-show="vm.sortType === 'route_title'"
                          ng-class="{reverse: vm.reverse}"></span>
                    <span>Route</span>
                </div>

                <div class="col s2 no-margin center-align" ng-click="vm.assignSortType('call_made')">
                    <span class="sortOrder" ng-show="vm.sortType === 'call_made'"
                          ng-class="{reverse: vm.reverse}"></span>
                    <span>Calls Made</span>
                </div>

                <div class="col s2 no-margin center-align" ng-click="vm.assignSortType('sucessful_call')">
                    <span class="sortOrder" ng-show="vm.sortType === 'sucessful_call'"
                          ng-class="{reverse: vm.reverse}"></span>
                    <span>Successful</span>
                </div>

                <div class="col s2 no-margin center-align" ng-click="vm.assignSortType('unsucessful_call')">
                    <span class="sortOrder" ng-show="vm.sortType === 'unsucessful_call'"
                          ng-class="{reverse: vm.reverse}"></span>
                    <span>Unsuccessful</span>
                </div>


                <div class="col s2 no-margin center-align" ng-click="vm.assignSortType('user_title')">
                    <span class="sortOrder" ng-show="vm.sortType === 'user_title'"
                          ng-class="{reverse: vm.reverse}"></span>
                    <span>DSE</span>
                </div>

                <div class="col s3 no-margin center-align" ng-click="vm.assignSortType('distributor_title')">
                    <span class="sortOrder" ng-show="vm.sortType === 'total_outlets'"
                          ng-class="{reverse: vm.reverse}"></span>
                    <span>Distributor</span>
                </div>

                <div class="col s1 no-margin halign-wrapper valign-wrapper center-align">
                    <i style="display: inline-block; padding: 5px; border-radius: 50%;"
                       class="tiny material-icons dropdown-button"
                       ng-click="vm.downloadData();">file_download</i>
                </div>
            </div>
        </li>

        <li bindonce sly-repeat="callMade in vm.objectList">

            <div class="collapsible-header"
                 ng-click="vm.getDetailOfCallMadeRouteRetailOutlet(callMade)">
                <div class="row collapsible-header-content">
                    <div class="col s2 no-margin center-align">
                        {{callMade.town_title}}
                    </div>
                    <div class="col s2 no-margin center-align">
                        {{callMade.route_title}}
                    </div>
                    <div class="col s2 no-margin center-align">
                        {{callMade.call_made}}
                    </div>
                    <div class="col s2 no-margin center-align">
                        {{callMade.sucessful_call}}
                    </div>
                    <div class="col s2 no-margin center-align">
                        {{callMade.unsucessful_call}}
                    </div>
                    <div class="col s2 no-margin center-align">
                        {{callMade.user_title}}
                    </div>
                    <div class="col s3 no-margin center-align">
                        {{callMade.distributor_title}}
                    </div>
                    <div class="col s1 no-margin center-align">
                    </div>
                </div>
            </div>

            <div class="collapsible-body">
                <div>
                    <div class="grid-header-bar row no-margin">

                        <div class="col s2 no-margin center-align">
                            <span>S.No</span>
                        </div>
                        <div class="col s3 no-margin center-align">
                            <span>Retail Outlet</span>
                        </div>
                        <div class="col s2 no-margin center-align">
                            <span>Call Status</span>
                        </div>
                        <div class="col s2 no-margin center-align">
                            <span>Call time</span>
                        </div>
                        <div class="col s3 no-margin center-align">
                            <span>Reason</span>
                        </div>
                    </div>
                    <div class="row" sly-repeat="retailOutlet in callMade.children" style="padding: 0 2rem">
                        <div class="col s2 no-margin center-align">
                            {{$index+1}}
                        </div>
                        <div class="col s3 cursor-pointer no-margin center-align" ng-click="vm.controller.detailView(retailOutlet)">
                            <span>{{retailOutlet.retail_outlet_title}}</span>
                        </div>
                        <div class="col s2 no-margin center-align">
                            <i ng-if="retailOutlet.sucessful_call" class="small material-icons" style="color:blue">done</i>
                            <i ng-if="retailOutlet.unsucessful_call" class="small material-icons" style="color:blue">clear</i>
                        </div>
                        <div class="col s2 no-margin center-align">
                            <span>{{retailOutlet.created_at | date:' h:mm'}}</span>
                        </div>
                        <div class="col s3 no-margin center-align">
                            <span ng-if="retailOutlet.no_order_reason">{{retailOutlet.no_order_reason}}</span>
                        </div>

                    </div>
                </div>

            </div>

        </li>

        <li>
            <div ng-include=" 'app/foundation/pagination.tmpl.html' "></div>
        </li>

    </ul>
</div>